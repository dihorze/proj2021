(this.webpackJsonpproj2021=this.webpackJsonpproj2021||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(29),o=n.n(i),c=n(30),s=n(6),u=n(1),d=function(e){return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)("div",{children:"This is the landing page."}),Object(u.jsx)("div",{children:Object(u.jsx)(c.b,{to:"/main",children:"to Main page"})})]})},l=n(4),f=n(5),h=n(17),p=n(16),v=n(68),y=n(3),m=n(67),g=(n(61),Object(m.a)({btn:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:32,maxWidth:200,backgroundColor:"rgba(255, 128, 0, 0.5)","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","&:hover":{"& $text":{fontSize:18}},"&:active":{"& $text":{transform:"translateY(2px)"}}},text:{fontSize:16,color:"black",textShadow:"1.5px 1.5px 2px dimgray"}}),function(e){var t=e.children,n=e.onClick,r=e.btnStyle,a=e.textStyle;return Object(u.jsx)("div",{className:"btn",style:r,onClick:n,children:Object(u.jsx)("div",{className:"text",style:a,children:t})})}),b=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.x=t,this.y=n,this.add=function(t){return new e(r.x+t.x,r.y+t.y)},this.subtract=function(t){return new e(r.x-t.x,r.y-t.y)}}return Object(f.a)(e,null,[{key:"at",value:function(t,n){return new e(t,n)}},{key:"subtract",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}}]),e}(),O=140,j=198,w=function(e){return e-j},C=b.at(0,1500),x=function(e){return w(e)-75},k=function(e){return w(e)-25},A=function(e){return w(e)+125},D=function(){var e=Object(r.useState)([window.innerWidth,window.innerHeight]),t=Object(y.a)(e,2),n=t[0],a=t[1];return Object(r.useLayoutEffect)((function(){var e=function(){a([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},S=(n(62),Object(m.a)({card:{opacity:function(e){var t=e.isEntered,n=e.isExiting;return t&&!n?"1":"0"},position:"fixed",top:function(e){var t=e.refLoc;return null===t||void 0===t?void 0:t.y},left:function(e){var t=e.refLoc;return null===t||void 0===t?void 0:t.x},transition:function(e){if(e.isExiting)return"offset-distance ".concat(e.slideOutDuration,"ms ease-in, transform ").concat(e.slideOutDuration,"ms ease-out, opacity ").concat(e.slideOutDuration,"ms ease-in");var t=e.isSelected,n=e.isMoving,r=e.isHovered,a=e.isOnCards,i=e.isAiming,o=e.isEntered,c=e.duration;return"all "+(i?"300ms":n?"0ms":r?"30ms":t?"100ms":a?"300ms":o?"".concat(c,"ms ease-out"):"100ms linear")},transformOrigin:"center",transform:function(e){var t=e.deg,n=e.offsetX,r=e.offsetY,a=e.isHovered,i=e.isSelected,o=e.isEntered,c=e.isExiting;return o?c?"scale(0.01) rotate(0.4turn)":i?"scale(1.3)":a?"translateY(".concat(-r-30,"px) scale(1.3)"):"translateX(".concat(n,"px) rotate(").concat(t,"deg)"):"scale(0.3) rotate(".concat(-t,"deg)")},zIndex:function(e){var t=e.isHovered,n=e.isSelected;return t||n?"100":"auto"},offsetPath:function(e){if(e.isExiting){var t=e.loc,n=e.refLoc,r=e.width,a=e.height,i=e.innerWidth,o=b.at((null===t||void 0===t?void 0:t.x)-(null===n||void 0===n?void 0:n.x),(null===t||void 0===t?void 0:t.y)-(null===n||void 0===n?void 0:n.y)),c=b.at(r/2,a/2),s=o.add(c),u=b.at(i/2,50).add(c),d=b.at(o.x,-.2*o.x+o.y).add(c),l=b.at(0,.1*o.x-50).add(c);return"path('M ".concat(u.x," ").concat(u.y," C ").concat(l.x," ").concat(l.y,", ").concat(d.x," ").concat(d.y,", ").concat(s.x," ").concat(s.y,"')")}var f=e.loc,h=e.refLoc,p=e.width,v=e.height,y=e.innerWidth,m=b.at((null===f||void 0===f?void 0:f.x)-(null===h||void 0===h?void 0:h.x),(null===f||void 0===f?void 0:f.y)-(null===h||void 0===h?void 0:h.y)),g=b.at(p/2,v/2),O=b.at(-y/2,50).add(g),j=m.add(g),w=b.at(0,-.1*m.x).add(g),C=b.at(0,.1*m.x+m.y).add(g);return"path('M ".concat(O.x," ").concat(O.y," C ").concat(w.x," ").concat(w.y,", ").concat(C.x," ").concat(C.y,", ").concat(j.x," ").concat(j.y,"')")},offsetDistance:function(e){var t=e.isEntered,n=e.isExiting;return t&&!n?"100%":"0%"},offsetRotate:"0deg"},cardStatic:{borderRadius:2,width:function(e){return e.width},height:function(e){return e.height},padding:7,fontSize:24,fontWeight:"bold",backgroundImage:"url('./assets/card1.png')",backgroundSize:"cover",transition:"transform 0.1s","&:hover":{transform:"scale(1.1)"}},cardStaticNoHover:{borderRadius:2,width:function(e){return e.width},height:function(e){return e.height},padding:7,fontSize:24,fontWeight:"bold",backgroundImage:"url('./assets/card1.png')",backgroundSize:"cover"}})),P=function(e){var t=e.onClick,n=e.onMouseEnter,a=e.onMouseMove,i=e.onMouseLeave,o=e.onMouseDown,c=e.onMouseUp,s=e.loc,d=e.width,l=e.height,f=e.deg,h=e.origin,p=e.hoverOffsets,v=e.offsets,m=e.isSelected,g=e.isHovered,O=e.isOnCards,j=e.isAiming,C=e.card,x=e.slideInProps,k=e.slideOutProps,A=e.children,P=Object(r.useState)(!1),M=Object(y.a)(P,2),T=M[0],_=M[1],I=Object(r.useState)(!1),N=Object(y.a)(I,2),L=N[0],R=N[1],H=Object(r.useState)(!1),F=Object(y.a)(H,2),U=F[0],z=F[1],q=(null===x||void 0===x?void 0:x.duration)||400;Object(r.useEffect)((function(){var e,t,n;return x&&(e=setTimeout((function(){_(!0)}),x.delay)),k?t=setTimeout((function(){R(!0)}),k.delay):m?n=setTimeout((function(){return z(!0)}),50):z(!1),function(){clearTimeout(e),clearTimeout(t),clearTimeout(n)}}),[m,x,k]);var W=D(),Q=Object(y.a)(W,2),Y=Q[0],G=Q[1],K=b.at((Y-d)/2,w(G)),V=S({loc:s,origin:h,width:d,height:l,deg:f,offsetY:p?p.y:0,offsetX:v?v.x:0,isSelected:m,isHovered:g,isMoving:U,isEntered:T,isExiting:L,isOnCards:O,isAiming:j,refLoc:K,duration:q,slideOutDuration:null===k||void 0===k?void 0:k.duration,innerWidth:Y});return Object(u.jsx)("div",{className:V.card+" glow-ctn",onClick:t,onMouseEnter:n,onMouseMove:a,onMouseLeave:i,onMouseDown:o,onMouseUp:c,children:C?Object(u.jsx)(E,{loc:b.at(0,0),width:d,height:l,card:C}):A})},E=function(e){var t=e.onClick,n=e.onMouseEnter,r=e.onMouseMove,a=e.onMouseLeave,i=e.onMouseDown,o=e.onMouseUp,c=e.width,s=e.height,d=e.card,l=e.hasHoverEffect,f=e.children,h=S({width:c,height:s}),p=l?h.cardStatic:h.cardStaticNoHover;return Object(u.jsx)("div",{className:p,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:a,onMouseDown:i,onMouseUp:o,children:d?Object(u.jsx)(T,{card:d,width:c}):f})},M=Object(m.a)({ctn:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},title:{fontSize:function(e){var t=e.title,n=e.width,r=t.length;return"".concat(Math.min(n/r*.9,9*n/O),"pt")},width:"80%",height:"11.5%",display:"flex",justifyContent:"center",alignItems:"center"},img:{width:"85%",margin:"12% 0 9% 0",borderRadius:"1px",border:"1px solid #333"},text:{fontSize:function(e){var t=e.description,n=e.width,r=t.length;return"".concat(Math.min(4.1*n/r,8*n/O),"pt")},padding:"5px",width:"91%",margin:"0 5%"}}),T=function(e){var t=e.card,n=e.width,r=t.getTitle(),a=t.getDiscription(),i=M({title:r,description:a,width:n});return Object(u.jsxs)("div",{className:i.ctn,children:[Object(u.jsx)("div",{className:i.title,children:r}),Object(u.jsx)("img",{src:t.getUri(),alt:r,className:i.img,draggable:!1}),Object(u.jsx)("div",{className:i.text,children:t.getDiscription()})]})},_=n(14),I=a.a.createContext(b.at(0,0)),N=function(e){return function(t){return Object(u.jsx)(I.Consumer,{children:function(n){return Object(u.jsx)(e,Object(_.a)({mousePos:n},t))}})}},L=n(43),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.floor(1e4*Math.random())+"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"test";Object(l.a)(this,e),this.key=t,this.id=n}return Object(f.a)(e,[{key:"copy",value:function(){return e.init(this.id,this.key)}},{key:"getCost",value:function(){return q[this.id].cost}},{key:"getTitle",value:function(){return q[this.id].title}},{key:"getType",value:function(){return q[this.id].type}},{key:"getUri",value:function(){return q[this.id].uri}},{key:"getLevel",value:function(){return q[this.id].level}},{key:"getDiscription",value:function(){return q[this.id].discription}},{key:"getIsPlayable",value:function(){return q[this.id].isPlayable}},{key:"getIsShred",value:function(){return q[this.id].isShred}}],[{key:"fake",value:function(){return new e}},{key:"init",value:function(t,n){var r=new e;return r.id=t,r.key=n,r}}]),e}();R.getCardFromKey=function(e){var t=e.split("-")[0];return R.init(t,e)};var H="NONE",F="ATTACK",U="NON_ATTACK",z={explain:{id:"explain",title:"Explain",type:F,level:"0",uri:"./assets/Explain.png",discription:"Resolve 8 confunsion",cost:1,isPlayable:!0,isShred:!1},calm:{id:"calm",title:"Calm",type:U,level:"0",uri:"./assets/Calm.png",discription:"Add 8 composure",cost:1,isPlayable:!0,isShred:!1},smile_and_nod:{id:"smile_and_nod",title:"Smile and Nod",type:U,level:"0",uri:"./assets/Smile_and_nod.png",discription:"Add 6 composure, draw 1 card",cost:1,isPlayable:!0,isShred:!1},quick_reference:{id:"quick_reference",title:"Quick Reference",type:F,level:"0",uri:"./assets/Quick_reference.png",discription:"Resolve 5 confusion, gain 2 clarity",cost:1,isPlayable:!0,isShred:!1},innocence:{id:"innocence",title:"Innocence",type:U,level:"1",uri:"./assets/Innocence.png",discription:"Add 13 composure, add 10 confusion for all opponents",cost:1,isPlayable:!0,isShred:!1},wait_for_it:{id:"wait_for_it",title:"Wait For It",type:U,level:"1",uri:"./assets/Wait_for_it.png",discription:"The damage dealt this turn is transferred to the next turn, start a new turn, shred",cost:1,isPlayable:!0,isShred:!0},pardon:{id:"pardon",title:"Pardon",type:U,level:"1",uri:"./assets/Pardon.png",discription:"The same move will be performed by your opponent in the next turn, shred",cost:1,isPlayable:!0,isShred:!0},pep_talk:{id:"pep_talk",title:"Pep Talk",type:U,level:"1",uri:"./assets/Pep_talk.png",discription:"Resolve 25 confusion to people who like your research, shred",cost:1,isPlayable:!0,isShred:!0},barrage:{id:"barrage",title:"Barrage",type:F,level:"1",uri:"./assets/Barrage.png",discription:"Resolve 6 confusion X times",cost:-1,isPlayable:!0,isShred:!1},vehement:{id:"vehement",title:"Vehement",type:U,level:"1",uri:"./assets/Vehement.png",discription:"If your motivation is the highest status, resolve 15 confusion and apply 2 impressionable to all opponent",cost:2,isPlayable:!0,isShred:!1},adamant:{id:"adamant",title:"Adamant",type:U,level:"1",uri:"./assets/Adamant.png",discription:"Add composure equals to your methodology score",cost:0,isPlayable:!0,isShred:!1},digest:{id:"digest",title:"Digest",type:F,level:"1",uri:"./assets/Digest.png",discription:"Resolve 11 confusion, if the opponent is convinced, gain 5 methodology score, shred",cost:1,isPlayable:!0,isShred:!0},toilet_tour:{id:"toilet_tour",title:"Toilet Tour",type:U,level:"1",uri:"./assets/Toilet_tour.png",discription:"Remove one negative debuff, shred",cost:1,isPlayable:!0,isShred:!0},first_of_all:{id:"first_of_all",title:"First of All",type:U,level:"1",uri:"./assets/First_of_all.png",discription:"Shuffle one Secondly into your hand, shred",cost:1,isPlayable:!0,isShred:!0}},q=Object(_.a)({},z),W=function(e){var t,n=e.split("-")[0];return(null===(t=q[n])||void 0===t?void 0:t.type)||(parseInt(e)%2?F:U)},Q=Object.keys(q),Y=function(){var e=Math.floor(Math.random()*Q.length);return Q[e]},G=function(e){for(var t=[],n=0;n<e;n++){var r=Y();t.push(R.init(r,"".concat(r,"-ex-").concat(Math.floor(1e4*Math.random()))))}return t},K=n(10),V=n(12),$=n.n(V),B=n(21),X=n(23),J=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?e:Object(B.a)(e),a=r.length;0!==a;){t=Math.floor(Math.random()*a),a--;var i=[r[t],r[a]];r[a]=i[0],r[t]=i[1]}return r},Z=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ee="SLIDE_TO_HAND",te="SLIDE_FROM_HAND",ne="FLY_OUT",re="SHRED",ae="SHUFFLE_DISCARD_TO_DRAW",ie="ACTIVATE_AIMING_CARD",oe="ADD_ONE_CARD",ce="ADD_MANY_CARDS",se="DELETE_ALL_CARDS",ue="DELETE_ONE_CARDS",de="SELECT_CARD",le="UNSELECT_CARD",fe="SET_AIMING_CARD",he="SET_HOVERED_CARD",pe="CLEAR_HOVERED_CARD",ve="ADD_CARDS_TO_HAND",ye="DELETE_CARDS_FROM_HAND",me="ADD_CARDS_TO_DRAW_PILE",ge="DELETE_CARDS_FROM_DRAW_PILE",be="ADD_CARDS_TO_DISCARD_PILE",Oe="DELETE_CARDS_FROM_DISCARD_PILE",je="INCREMENT_ROUND",we="INCREMENT_SHUFFLE",Ce="TOGGLE_DRAW_PILE",xe="TOGGLE_DISCARD_PILE",ke="LOCK_CARD_TABLE",Ae="UNLOCK_CARD_TABLE",De="ENQUEUE_ACTION_QUEUE",Se="DEQUEUE_ACTION_QUEUE",Pe="QUEUE_ANIMATION",Ee="START_PLAYING_ANIMATION",Me="FINISH_PLAYING_ANIMATION",Te="RUN_NEXT_ANIMATION",_e="DEQUEUE_ANIMATION",Ie="PLAY_ANIMATION",Ne="REMOVE_SLIDE_IN_ANIMATION",Le="REMOVE_SLIDE_OUT_ANIMATION",Re="REMOVE_FLY_OUT_ANIMATION",He="REMOVE_SHRED_ANIMATION",Fe="REMOVE_SHUFFLE_DISCARD_TO_DRAW_ANIMATION",Ue="ADD_ONE_CARD_TO_DECK",ze="TOGGLE_DECK_OF_CARDS",qe="TOGGLE_CARD_SELECTION_PAGE",We=function(e){return{type:Ie,animation:e}},Qe=function(e){return{type:Ne,key:e}},Ye=function(e){return{type:Le,key:e}},Ge=function(e){return{type:He,key:e}},Ke=function(e){return{type:Re,key:e}},Ve=function(){return{type:Fe}},$e=function(e){return{type:de,key:e}},Be=function(){return{type:le}},Xe=function(e){return{type:ve,cards:e}},Je=function(e){return{type:ye,keys:e}},Ze=function(e){return{type:me,cards:e}},et=function(e){return{type:ge,keys:e}},tt=function(e){return{type:be,cards:e}},nt=function(e){return{type:Oe,keys:e}},rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:400;return function(){var a=Object(X.a)($.a.mark((function a(i,o){var c;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=Object(B.a)(o().battle.card.cards),i(Xe(e)),i(We({type:ee,payload:{cardsToAdd:e,cards:c,duration:r,delay:n}})),a.next=6,Z(n*e.length+r);case 6:e.forEach((function(e){return i(Qe(e.key))})),t&&t();case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:750;return function(){var a=Object(X.a)($.a.mark((function a(i,o){var c;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=Object(B.a)(o().battle.card.cards),i(We({type:te,payload:{keysToDelete:e,cards:c,delay:n,duration:r}})),a.next=5,Z(n+r);case 5:e.forEach((function(e){return i(Ye(e))})),i(Je(e)),t();case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},it=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1?arguments[1]:void 0;return function(r,a){var i=a(),o=i.battle,c=i.player,s=Object(B.a)(o.card.drawPileCards),u=c.player.maxCardsInHand,d=o.card.cards.length,l=s.length;if(t=t<0?c.player.cardsPerTurn:t,l<=0&&o.card.discardPileCards.length<=0)n();else{var f=[],h=Math.min(t,l);h>0?(d+h<=u?(f.push.apply(f,Object(B.a)(s.slice(0,h))),t-=h,d+=h,l-=h):(f.push.apply(f,Object(B.a)(s.slice(0,u-d))),t-=u-d,l-=u-(d=u)),r(et(f.map((function(e){return e.key})))),t>0&&d<u?(r(rt(f)),o.card.discardPileCards.length>0?r(ot((function(){return r(e(t,n))}))):n()):r(rt(f,n))):t>0&&d<u&&(o.card.discardPileCards.length>0?r(ot((function(){return r(e(t,n))}))):n())}}},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;return function(){var r=Object(X.a)($.a.mark((function r(a,i){var o,c,s,u;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=i(),c=o.battle,s=J(Object(B.a)(c.card.discardPileCards)),a(pt()),a(nt(s.map((function(e){return e.key})))),u={type:ae,payload:{duration:t,delay:n,noCards:s.length}},a(We(u)),r.next=8,Z(n+t);case 8:a(Ve()),a(Ze(s)),e();case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},ct=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return function(r,a){var i=e?a().battle.card.cards:t,o=i.map((function(e){return e.key}));if(0===o.length)return n();r(at(o,(function(){r(tt(Object(B.a)(i))),n()})))}},st=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:750,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(){var i=Object(X.a)($.a.mark((function i(o,c){var s;return $.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.map((function(e){return e.key})),o(We({type:ne,payload:{locs:t,cardsToFly:e,duration:r,delay:a}})),o(Je(s)),i.next=6,Z(a+r);case 6:e.forEach((function(e){return o(Ke(e.key))})),o(tt(e)),n();case 9:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},ut=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:750,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(){var i=Object(X.a)($.a.mark((function i(o,c){var s;return $.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.map((function(e){return e.key})),o(We({type:re,payload:{locs:t,cardsToShred:e,duration:r,delay:a}})),o(Je(s)),i.next=6,Z(a+r);case 6:e.forEach((function(e){return o(Ge(e.key))})),n();case 8:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},dt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:750,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return function(){var o=Object(X.a)($.a.mark((function o(c,s){var u;return $.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u={type:ne,payload:{locs:t,endLoc:b.at(25,window.innerHeight-25),cardsToFly:e,duration:a,delay:i}},c(We(u)),r&&c(Je(e.map((function(e){return e.key})))),o.next=5,Z(i+a);case 5:e.forEach((function(e){return c(Ke(e.key))})),c(Ze(e)),n();case 8:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}()},lt=function(){return function(e,t){var n=t().player;e(ht()),e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t,n){t(yt((function(t){return it(e,t)})))}}(n.player.cardsPerTurn))}},ft=function(){return function(e,t){e(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n(yt((function(n){return ct(e,t,n)})))}}())}},ht=function(){return{type:je}},pt=function(){return{type:we}},vt=function(){return function(){var e=Object(X.a)($.a.mark((function e(t,n){var r,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n().battle.card.actionQueue).length>0)){e.next=9;break}return a=r[0],t({type:Se}),e.next=6,Z(250);case 6:a(),e.next=10;break;case 9:t({type:Ae});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},yt=function(e){return function(t,n){n().battle.card.cardTableLock?t(function(e){return{type:De,action:e}}((function(){return t(e((function(){return t(vt())})))}))):(t({type:ke}),t(e((function(){return t(vt())}))))}},mt=function(){return{type:qe}},gt={activateAimingCard:function(e){return{type:ie,key:e}},deleteAllCards:function(){return{type:se}},deleteOneCard:function(e){return{type:ue,key:e}},selectCard:$e,unselectCard:Be,setHoveredCard:function(e){return{type:he,index:e}},clearHoveredCard:function(){return{type:pe}},startBattle:function(){return function(e,t){var n=t().player;e(Ze(n.player.deck)),e(lt())}},playACard:function(e,t){return function(n){var r,a;e.getIsShred()?n((r=[e],a=[t],function(e,t){e(yt((function(e){return ut(r,a,e)})))})):n(function(e,t){return function(n,r){n(yt((function(n){return st(e,t,n)})))}}([e],[t]))}},startTurn:lt,toggleCardSelectionPage:mt},bt=a.a.createContext([window.innerWidth,window.innerHeight]),Ot=function(e){return function(t){return Object(u.jsx)(bt.Consumer,{children:function(n){return Object(u.jsx)(e,Object(_.a)({screenSize:n},t))}})}},jt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).cardEnter=function(t){return function(){t!==e.props.hoveredCard&&e.props.aimingCard===H&&e.props.setHoveredCard(t)}},e.cardMove=function(t){return function(){t!==e.props.hoveredCard&&e.props.aimingCard===H&&e.props.setHoveredCard(t)}},e.cardLeave=function(){e.props.aimingCard===H&&e.props.clearHoveredCard()},e.leaveTable=function(){},e.cardMouseUp=function(t){0===t.button&&e.props.selectedCard!==H&&e.props.mousePos.y<x(e.props.screenSize[1])&&e.props.playACard(R.getCardFromKey(e.props.selectedCard),e.props.mousePos)},e.cardMouseDown=function(t){return function(n){e.props.aimingCard===H&&(0===n.button?e.props.mousePos.y>=x(e.props.screenSize[1])&&e.props.selectCard(t):(n.preventDefault(),e.props.unselectCard()))}},e}return Object(f.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state!==t||this.props.selectedCard!==H||e.selectedCard!==H||this.props.hoveredCard!==e.hoveredCard||this.props.aimingCard!==e.aimingCard||this.props.cards!==e.cards||this.props.slideInAnimation!==e.slideInAnimation||this.props.slideOutAnimation!==e.slideOutAnimation||this.props.screenSize!==e.screenSize}},{key:"render",value:function(){var e=this,t=xt(this.state,this.props),n=(this.props.classes,this.props.slideInAnimation.map((function(e){return e.card.key}))),r=this.props.slideOutAnimation.map((function(e){return e.card.key}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g,{btnStyle:{position:"fixed",top:300,left:300,width:150},onClick:this.props.toggleCardSelectionPage,children:"Choose A Card"}),Object(u.jsx)(g,{btnStyle:{position:"fixed",top:300,left:700,width:150},onClick:this.props.startBattle,children:"Discussion Start"}),Object(u.jsx)(g,{btnStyle:{position:"fixed",top:300,left:900,width:150},onClick:this.props.startTurn,children:"Start Turn"}),t.map((function(t,a){var i=t.loc,o=t.o,c=t.deg,s=t.key,d=t.card,l=t.hoverOffsets,f=t.offsets;return Object(u.jsx)(P,{loc:i,origin:o,deg:c,card:d,isSelected:e.props.selectedCard===s,isHovered:e.props.hoveredCard===a&&e.props.selectedCard===H,isOnCards:e.props.hoveredCard>=0,isAiming:e.props.aimingCard===s,hoverOffsets:l,offsets:f,width:O,height:j,slideInProps:n.includes(s)?e.props.slideInAnimation[n.findIndex((function(e){return e===s}))]:null,slideOutProps:r.includes(s)?e.props.slideOutAnimation[r.findIndex((function(e){return e===s}))]:null,onMouseEnter:e.cardEnter(a),onMouseMove:e.cardMove(a),onMouseLeave:e.cardLeave,onMouseDown:e.cardMouseDown(s),onMouseUp:e.cardMouseUp,children:s},s)}))]})}}]),n}(r.Component),wt=Ot(N(Object(L.a)({overlay:{width:"100%"}})(jt))),Ct=Object(K.b)((function(e){var t=e.battle,n=e.animation;return{cards:t.card.cards,aimingCard:t.card.aimingCard,hoveredCard:t.card.hoveredCard,selectedCard:t.card.selectedCard,slideInAnimation:n.animation.slideInAnimation,slideOutAnimation:n.animation.slideOutAnimation}}),gt)(wt),xt=function(e,t){var n=Object(y.a)(t.screenSize,2),r=n[0],a=n[1];return t.cards.map((function(e,n){var i,o=e.key;if(t.selectedCard===o)return{loc:(i=t.mousePos,i.subtract(b.at(70,99)).add(b.at(10,0))),o:b.at(70,99),deg:0,key:o,hoverOffsets:b.at(0,0),offsets:b.at(0,0),card:e};var c,s,u,d,l=n-(t.cards.length-1)/2,f=4*l/180*Math.PI,h=b.at((r-O)/2+C.y*Math.sin(f),w(a)+1.5*C.y*(1-Math.cos(f))),p=t.selectedCard===H?t.hoveredCard<0?-1:t.hoveredCard:t.cards.findIndex((function(e){return e.key===t.selectedCard})),v=n===p||p<0?0:n<p?-1:1;return t.aimingCard===o?{loc:b.at(h.x,x(a)),o:b.at(70,99),deg:0,key:o,hoverOffsets:b.at(0,0),offsets:b.at(0,0),card:e}:{loc:h,o:b.at(70,99),deg:4*l,key:o,hoverOffsets:b.at(0,1.5*C.y*(1-Math.cos(f))),offsets:b.at(v*(c=n,s=p,u=2,d=300,d/(u*Math.sqrt(2*Math.PI))*Math.exp(-.5*Math.pow((c-s)/u,2))),0),card:e}}))},kt=a.a.memo((function(e){return e.children}),(function(){return!0})),At=function(e){var t=Object(u.jsx)(kt,{children:e.children});return e.providers.forEach((function(e){t=Object(u.jsx)(e,{children:t})})),Object(u.jsx)(u.Fragment,{children:t})},Dt=Ot(N(function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleMouseMove=function(t){W(e.props.selectedCard)===F&&t.clientY<k(e.props.screenSize[1])&&e.props.setAimingCard(e.props.selectedCard),e.props.aimingCard!==H&&t.clientY>A(e.props.screenSize[1])&&e.props.unselectCard()},e.handleMouseUp=function(t){0===t.button||e.props.unselectCard()},e.handleKeyUp=function(t){var n=["1","2","3","4","5","6","7","8","9","0"];if(n.includes(t.key)){var r=n.findIndex((function(e){return e===t.key}));if(r>=e.props.cards.length)return;var a=e.props.cards[r].key;return e.props.aimingCard===a||e.props.selectedCard===a?e.props.unselectCard():void(W(a)===F&&e.props.mousePos.y<k(e.props.screenSize[1])?e.props.setAimingCard(a):e.props.selectCard(a))}switch(t.key){case"e":return e.props.endTurn();case"s":return e.props.startTurn();default:return}},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(u.jsx)("div",{})}}]),n}(r.Component))),St=Object(K.b)((function(e){var t=e.battle;return{selectedCard:t.card.selectedCard,aimingCard:t.card.aimingCard,cards:t.card.cards}}),{setAimingCard:function(e){return{type:fe,key:e}},unselectCard:Be,endTurn:ft,startTurn:lt,selectCard:$e})(Dt),Pt=n(80),Et=Object(m.a)({svgContainer:{position:"absolute",left:0,top:0,width:"100vw",height:"100vh",overflow:"hidden"}}),Mt=function(e){var t=e.p1,n=e.p2,r=e.cp1,a=e.cp2,i=Et({});return Object(u.jsx)("div",{className:i.svgContainer,children:Object(u.jsxs)("svg",{width:"100vw",height:"100vh",children:[Object(u.jsx)("marker",{id:"attackArrow",markerWidth:"10",markerHeight:"10",refX:"1",refY:"2",orient:"auto",markerUnits:"strokeWidth",children:Object(u.jsx)("path",{d:"M0,0 L0.5,2 L0,4 L4,2 z",fill:"maroon"})}),Object(u.jsx)("path",{d:"M ".concat(t.x," ").concat(t.y," C ").concat(r.x," ").concat(r.y,", ").concat(a.x," ").concat(a.y,", ").concat(n.x," ").concat(n.y),strokeDasharray:"20 5",stroke:"maroon",fill:"transparent",strokeWidth:"10",markerEnd:"url(#attackArrow)"})]})})},Tt=Object(Pt.a)({arrow:{width:"100%"}}),_t=N((function(e){var t=e.cards,n=e.aimingCard,r=e.mousePos,a=Tt({}),i=D(),o=Object(y.a)(i,2),c=o[0],s=o[1];if(n===H)return n!==H&&Object(u.jsx)("div",{});var d=4*(t.findIndex((function(e){return e.key===n}))-(t.length-1)/2)/180*Math.PI,l=b.at((c-O)/2+C.y*Math.sin(d)+70,x(s)+99);return Object(u.jsx)("div",{className:a.arrow,children:Object(u.jsx)(Mt,{p1:l,p2:r,cp1:l.subtract(b.at(.25*(r.x-l.x),200)),cp2:r.subtract(b.at(r.x-l.x,20))})})})),It=Object(K.b)((function(e){var t=e.battle;return{cards:t.card.cards,aimingCard:t.card.aimingCard}}))(_t),Nt=Object(m.a)({backdrop:{position:"fixed",opacity:function(e){return e.show?1:0},top:0,left:0,height:"100%",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:200,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",overflowY:"scroll",transition:"opacity 0.2s ease-in"},cardctn:{padding:25}}),Lt=function(e){var t=e.show,n=e.cards,a=e.onContextMenu,i=Object(r.useState)(!0),o=Object(y.a)(i,2),c=o[0],s=o[1],d=Nt({show:t});Object(r.useEffect)((function(){t?s(!1):setTimeout((function(){return s(!0)}),200)}),[t]);return(!c||t)&&Object(u.jsx)("div",{className:d.backdrop,onContextMenu:function(e){e.preventDefault(),a()},children:n.map((function(e,t){return Object(u.jsx)("div",{className:d.cardctn,children:Object(u.jsx)(E,{card:e,width:182,height:258,loc:b.at(0,0),hasHoverEffect:!0})},e.key)}))})},Rt=Object(m.a)({img:{width:90,position:"fixed",right:30,bottom:24,transition:"transform 300ms ease-in",zIndex:function(e){return e.show?201:200},"&:hover":{transform:"scale(1.15)"},"&:active":{transform:"rotate(0.4turn)"}},txt:{position:"fixed",right:75,bottom:20,fontSize:"1em",color:"#fff"}}),Ht=function(e){e.locs;var t=e.cards,n=e.showDiscardDeck,r=e.onClick,a=e.onContextMenu,i=Rt({show:n});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:i.txt,children:t.length}),Object(u.jsx)("img",{className:i.img,src:"./assets/stack.png",alt:"stack",draggable:!1,onClick:r}),Object(u.jsx)(Lt,{cards:t,show:n,onContextMenu:a})]})},Ft=Object(m.a)({img:{width:80,height:80,position:"fixed",right:25,bottom:120},cap:{width:80,height:80,position:"fixed",right:25,bottom:120,transition:"transform 300ms ease-in",transformOrigin:"58px 17px","&:hover":{transform:"rotate3d(1, 0, 1, 45deg)"}}}),Ut=function(e){e.locs;var t=e.onClick,n=Ft({});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{className:n.img,src:"./assets/trashbin.png",alt:"trashbin",draggable:!1,onClick:t}),Object(u.jsx)("img",{className:n.cap,src:"./assets/trashbincap.png",alt:"cap",draggable:!1,onClick:t})]})},zt=Object(m.a)({img:{width:80,position:"fixed",left:30,bottom:40,transition:"transform 300ms ease-in",zIndex:function(e){return e.show?201:"auto"},"&:hover":{transform:"scale(1.15)"},"&:active":{transform:"rotate(-0.4turn)"}},txt:{position:"fixed",left:75,bottom:20,fontSize:"1em",color:"#fff"}}),qt=function(e){e.locs;var t=e.cards,n=e.showDrawDeck,a=e.onClick,i=e.onContextMenu,o=zt({show:n}),c=Object(r.useState)(J(t)),s=Object(y.a)(c,2),d=s[0],l=s[1];return Object(r.useEffect)((function(){l(J(t))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:o.txt,children:t.length}),Object(u.jsx)("img",{className:o.img,src:"./assets/draw_stack.png",alt:"draw_stack",draggable:!1,onClick:a}),Object(u.jsx)(Lt,{cards:d,show:n,onContextMenu:i})]})},Wt=Object(m.a)({img:{width:"100%",zIndex:-1}}),Qt=function(){var e=Wt({});return Object(u.jsx)("img",{src:"./assets/office.png",alt:"background",className:e.img,draggable:!1})},Yt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){this.props.classes;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Qt,{}),Object(u.jsx)(Ut,{onClick:this.props.endTurn}),Object(u.jsx)(Ht,{showDiscardDeck:this.props.showDiscardPile,cards:this.props.discardPileCards,onClick:this.props.toggleDiscardPile,onContextMenu:this.props.toggleDiscardPile}),Object(u.jsx)(qt,{showDrawDeck:this.props.showDrawPile,cards:this.props.drawPileCards,onClick:this.props.toggleDrawPile,onContextMenu:this.props.toggleDrawPile})]})}}]),n}(a.a.Component),Gt=Object(v.a)({})(Yt),Kt=Object(K.b)((function(e){var t=e.battle;return{drawPileCards:t.card.drawPileCards,showDrawPile:t.battle.showDrawPile,discardPileCards:t.card.discardPileCards,showDiscardPile:t.battle.showDiscardPile}}),{toggleDrawPile:function(){return{type:Ce}},toggleDiscardPile:function(){return{type:xe}},endTurn:ft})(Gt),Vt=Object(m.a)({ctn:{opacity:function(e){return e.isExiting?"0":"1"},position:"fixed",top:function(e){return e.loc.y},left:function(e){return e.loc.x},transformOrigin:"center",transition:function(e){return"offset-distance ".concat(e.duration,"ms ease-in, transform ").concat(e.duration,"ms ease-out, opacity ").concat(e.duration,"ms ease-in")},transform:function(e){var t=e.isExiting,n=e.isShrink;return t&&n?"scale(0.01)":"scale(1.3)"},offsetPath:function(e){var t=e.width,n=e.height,r=e.loc,a=e.endLoc,i=e.innerWidth,o=e.innerHeight,c=a||b.at(i-25,o-25),s=b.at(0,0),u=c.subtract(r),d=b.at(t/2,n/2),l=s.add(d),f=u.add(d),h=s.subtract(b.at(0,o/2)).add(d),p=b.at(u.x/2,u.y/2).add(d);return"path('M ".concat(l.x," ").concat(l.y," C ").concat(h.x," ").concat(h.y,", ").concat(p.x," ").concat(p.y,", ").concat(f.x," ").concat(f.y,"')")},offsetDistance:function(e){return e.isExiting?"100%":"0%"},offsetRotate:"auto 90deg",backgroundImage:"url('./assets/papercard.png')",backgroundSize:"cover"}}),$t=function(e){var t=e.loc,n=e.endLoc,a=e.isShrink,i=e.duration,o=e.delay,c=e.card,s=e.width,d=e.height,l=Object(r.useState)(!1),f=Object(y.a)(l,2),h=f[0],p=f[1];Object(r.useEffect)((function(){var e;return o&&o>0?e=setTimeout((function(){return p(!0)}),o):p(!0),function(){clearTimeout(e)}}),[o]);var v=s||O,m=d||j,g=D(),w=Object(y.a)(g,2),C=w[0],x=w[1],k=Vt({loc:t.subtract(b.at(v/2,m/2)).add(b.at(10,0)),endLoc:n,duration:i,isShrink:a,isExiting:h,width:v,height:m,innerWidth:C,innerHeight:x});return Object(u.jsx)("div",{className:k.ctn,children:Object(u.jsx)(E,{card:c,width:v,height:m,loc:b.at(0,0)})})},Bt=a.a.memo($t,(function(){return!0})),Xt=Object(m.a)({ctn:{opacity:function(e){var t=e.isFading,n=e.isExiting;return t&&n?"0.2":"1"},position:"fixed",top:function(e){return e.loc.y},left:function(e){return e.loc.x},transformOrigin:"center",transition:function(e){return"offset-distance ".concat(e.duration,"ms ease-in-out, opacity ").concat(e.duration,"ms ease-in-out")},offsetPath:function(e){var t=e.width,n=e.height,r=e.loc,a=e.endLoc,i=e.innerWidth,o=e.innerHeight,c=a||b.at(i-25,o-25),s=b.at(0,0),u=c.subtract(r),d=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(u,s),l=Math.random()*d/2,f=Math.random()*d/2,h=.52*Math.random()-.26,p=.52*Math.random()-.26,v=Math.atan2(u.y,u.x),y=b.at(t/2,n/2),m=s.add(y),g=u.add(y),O=b.at(l*Math.cos(h+v),l*Math.sin(h+v)).add(y),j=b.at(f*Math.cos(p+v),f*Math.sin(p+v)).add(y);return"path('M ".concat(m.x," ").concat(m.y," C ").concat(O.x," ").concat(O.y,", ").concat(j.x," ").concat(j.y,", ").concat(g.x," ").concat(g.y,"')")},offsetDistance:function(e){return e.isExiting?"100%":"0%"},offsetRotate:function(e){return e.offsetRotate||"auto"},backgroundImage:"url('./assets/papercard.png')",backgroundSize:"cover"}}),Jt=function(e){var t=e.loc,n=e.endLoc,a=e.duration,i=e.delay,o=e.card,c=e.width,s=e.height,d=e.offsetRotate,l=e.isFading,f=Object(r.useState)(!1),h=Object(y.a)(f,2),p=h[0],v=h[1];Object(r.useEffect)((function(){var e;return i&&i>0?e=setTimeout((function(){return v(!0)}),i):v(!0),function(){clearTimeout(e)}}),[i]);var m=c||O,g=s||j,w=D(),C=Object(y.a)(w,2),x=C[0],k=C[1],A=Xt({loc:t.subtract(b.at(m/2,g/2)).add(b.at(10,0)),endLoc:n,duration:a,isExiting:p,width:m,height:g,offsetRotate:d,isFading:l,innerWidth:x,innerHeight:k});return Object(u.jsx)("div",{className:A.ctn,children:Object(u.jsx)(E,{card:o,width:m,height:g,loc:b.at(0,0)})})},Zt=a.a.memo(Jt,(function(){return!0})),en=Object(m.a)({}),tn=function(e){var t=e.duration,n=e.delay,r=e.noCards,a=e.width,i=e.height,o=(en(),D()),c=Object(y.a)(o,2),s=c[0],d=c[1];return Object(u.jsx)(u.Fragment,{children:new Array(r).fill(0).map((function(e,o){var c=500*Math.random();return Object(u.jsx)(Zt,{loc:b.at(s-75,d-75),endLoc:b.at(75,d-75),duration:t-(o===r-1?500:c)+n,delay:(o===r-1?500:c)+n,width:a||30,height:i||42,isFading:!0},o)}))})},nn=a.a.memo(tn,(function(){return!0})),rn=Object(m.a)({ctn:{opacity:function(e){return e.isExiting?"0":"1"},position:"fixed",top:function(e){return e.loc.y},left:function(e){return e.loc.x},transformOrigin:"center",transition:function(e){return"transform ".concat(e.duration,"ms ease-out, opacity ").concat(e.duration,"ms ease-in")},transform:function(e){return e.isExiting?"scale(1.3) translateY(50px)":"scale(1.3)"},backgroundImage:"url('./assets/papercard.png')",backgroundSize:"cover"}}),an=function(e){var t=e.loc,n=e.duration,a=e.delay,i=e.card,o=e.width,c=e.height,s=Object(r.useState)(!1),d=Object(y.a)(s,2),l=d[0],f=d[1];Object(r.useEffect)((function(){var e;return a&&a>0?e=setTimeout((function(){return f(!0)}),a):f(!0),function(){clearTimeout(e)}}),[a]);var h=o||O,p=c||j,v=rn({loc:t.subtract(b.at(h/2,p/2)).add(b.at(10,0)),duration:n,isExiting:l,width:h,height:p});return Object(u.jsx)("div",{className:v.ctn,children:Object(u.jsx)(E,{card:i,width:h,height:p,loc:b.at(0,0)})})},on=a.a.memo(an,(function(){return!0})),cn=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.shuffle);return Object(u.jsxs)(u.Fragment,{children:[this.props.flyOutProps.map((function(e){return Object(r.createElement)(Bt,Object(_.a)(Object(_.a)({},e),{},{key:"flyout-"+e.card.key+"-"+t}))})),this.props.shredProps.map((function(e){return Object(r.createElement)(on,Object(_.a)(Object(_.a)({},e),{},{key:"shred-"+e.card.key+"-"+t}))})),this.props.shuffleDiscardToDrawProps&&Object(r.createElement)(nn,Object(_.a)(Object(_.a)({},this.props.shuffleDiscardToDrawProps),{},{key:"sdtd-"+t}))]})}}]),n}(a.a.Component),sn=Object(v.a)({})(cn),un=Object(K.b)((function(e){var t=e.battle,n=e.animation;return{drawPileCards:t.card.drawPileCards,showDrawPile:t.battle.showDrawPile,discardPileCards:t.card.discardPileCards,showDiscardPile:t.battle.showDiscardPile,slideInProps:n.animation.slideInAnimation,slideOutProps:n.animation.slideOutAnimation,flyOutProps:n.animation.flyOutAnimation,shredProps:n.animation.shredAnimation,shuffleDiscardToDrawProps:n.animation.shuffleDiscardToDrawAnimation,round:t.battle.round,shuffle:t.battle.noShuffles}}),{})(sn),dn=[function(e){var t=a.a.useState(b.at(0,0)),n=Object(y.a)(t,2),r=n[0],i=n[1];return a.a.useEffect((function(){var e=function(e){i(b.at(e.clientX,e.clientY))};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),Object(u.jsx)(I.Provider,{value:r,children:e.children})},function(e){var t=Object(r.useState)([window.innerWidth,window.innerHeight]),n=Object(y.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var e=function(){i([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(u.jsx)(bt.Provider,{value:a,children:e.children})}],ln=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){for(var e in q){(new Image).src=q[e].uri}}},{key:"render",value:function(){var e=this.props.classes;return Object(u.jsxs)(At,{providers:dn,children:[Object(u.jsxs)("div",{id:"map-area",className:e.canvasContainer,onContextMenu:function(e){return e.preventDefault()},children:[Object(u.jsx)(Ct,{}),Object(u.jsx)(It,{}),Object(u.jsx)(Kt,{}),Object(u.jsx)(un,{})]}),Object(u.jsx)(St,{})]})}}]),n}(a.a.Component),fn=Object(v.a)({canvasContainer:{width:"100vw",height:"100vh",overflow:"hidden"}})(ln),hn=function(){return{type:ze}},pn=Object(m.a)({topbar:{position:"fixed",top:0,left:0,width:"100%",background:"linear-gradient(to left, rgba(0, 128, 128, 0.2), rgba(0, 128, 128, 0) 30%)",height:36,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",zIndex:300},status:{width:200,height:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},icon:{width:36,height:36,padding:0,marginRight:0,marginLeft:20,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},text:{fontWeight:"bold",color:"darkcyan"},moneytext:{fontWeight:"bold",color:"orange"},btn:{width:"10%"}}),vn=Object(K.b)(null,{toggleDeckOfCards:hn})((function(e){e.toggleDeckOfCards;var t=pn({});return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:t.topbar,onContextMenu:function(e){return e.preventDefault()},children:Object(u.jsxs)("div",{className:t.status,children:[Object(u.jsx)("div",{className:t.icon,children:Object(u.jsx)("img",{src:"./assets/sanity.png",alt:"sanity",style:{height:28,width:28},draggable:!1})}),Object(u.jsx)("div",{className:t.text,children:"100"}),Object(u.jsx)("div",{className:t.icon,children:Object(u.jsx)("img",{src:"./assets/money.png",alt:"money",style:{height:24,width:24},draggable:!1})}),Object(u.jsx)("div",{className:t.moneytext,children:"99"})]})})})})),yn=Object(m.a)({backdrop:{position:"fixed",opacity:function(e){return e.show?1:0},top:0,left:0,height:"100%",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:200,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",overflowY:"scroll",transition:"opacity 0.2s ease-in"},cardctn:{padding:25}}),mn=function(e){var t=e.show,n=e.cards,a=e.onClick,i=e.onContextMenu,o=Object(r.useState)(!0),c=Object(y.a)(o,2),s=c[0],d=c[1],l=Object(r.useState)(G(3)),f=Object(y.a)(l,2),h=f[0],p=f[1],v=n||h,m=yn({show:t});Object(r.useEffect)((function(){t?(n||p(G(3)),d(!1)):setTimeout((function(){return d(!0)}),200)}),[t,n]);return(!s||t)&&Object(u.jsx)("div",{className:m.backdrop,onContextMenu:function(e){e.preventDefault(),i()},children:v.map((function(e,t){return Object(u.jsx)("div",{className:m.cardctn,onClick:a(e),children:Object(u.jsx)(E,{card:e,width:182,height:258,loc:b.at(0,0),hasHoverEffect:!0})},e.key)}))})},gn=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;this.props.classes;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(vn,{}),Object(u.jsx)(fn,{}),Object(u.jsx)(Lt,{show:this.props.showDeck,cards:this.props.deck,onContextMenu:this.props.toggleDeckOfCards}),Object(u.jsx)(mn,{show:this.props.showCardSelectionPage,onContextMenu:this.props.toggleCardSelectionPage,onClick:function(t){return function(n){e.props.toggleCardSelectionPage(),e.props.addNewCardsOutsideDeck([t],[b.at(window.innerWidth/2,window.innerHeight/2)])}}})]})}}]),n}(a.a.Component),bn=Object(v.a)({})(gn),On=Object(K.b)((function(e){var t=e.setting,n=e.player,r=e.game;return{showDeck:t.setting.showDeck,deck:n.player.deck,showCardSelectionPage:r.game.showCardSelectionPage}}),{toggleDeckOfCards:hn,toggleCardSelectionPage:mt,addNewCardsOutsideDeck:function(e,t){return function(n,r){n(yt((function(n){return dt(e,t,n)})))}}})(bn);var jn=function(){return Object(u.jsx)(c.a,{basename:"/proj2021",children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:"/",exact:!0,component:d}),Object(u.jsx)(s.a,{path:"/main",component:On}),Object(u.jsx)(s.a,{render:function(){return Object(u.jsx)("h1",{children:"404 Not Found"})}})]})})},wn=(n(65),n(13)),Cn=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){return{queue:[],isPlaying:!1,slideInAnimation:[],slideOutAnimation:[],flyOutAnimation:[],shredAnimation:[],shuffleDiscardToDrawAnimation:null}}},{key:"copy",value:function(e){return{queue:e.queue,isPlaying:e.isPlaying,slideInAnimation:e.slideInAnimation,slideOutAnimation:e.slideOutAnimation,flyOutAnimation:e.flyOutAnimation,shredAnimation:e.shredAnimation,shuffleDiscardToDrawAnimation:e.shuffleDiscardToDrawAnimation}}},{key:"withNewArray",value:function(t,n){var r=e.copy(t);return r.queue=n.queue||r.queue,r}},{key:"queueAnimation",value:function(t,n){return e.withNewArray(t,{queue:t.queue.concat(n)})}},{key:"startPlayingAnimation",value:function(t){var n=e.copy(t);return n.isPlaying=!0,n}},{key:"finishPlayingAnimation",value:function(t){var n=e.copy(t);return n.isPlaying=!1,n}},{key:"runNextAnimation",value:function(t){if(t.queue.length<=0)return t;switch(t.queue[0].type){case ee:return e.slideToHand(t,t.queue[0].payload);case te:return e.slideFromHand(t,t.queue[0].payload);case ne:return e.flyOut(t,t.queue[0].payload);case ae:return e.shuffleDiscardToDraw(t,t.queue[0].payload);default:return t}}},{key:"dequeueAnimation",value:function(t){return e.withNewArray(t,{queue:t.queue.slice(1)})}},{key:"playAnimation",value:function(t,n){switch(n.type){case ee:return e.slideToHand(t,n.payload);case te:return e.slideFromHand(t,n.payload);case ne:return e.flyOut(t,n.payload);case re:return e.Shred(t,n.payload);case ae:return e.shuffleDiscardToDraw(t,n.payload);default:return t}}},{key:"withNewAnimation",value:function(t,n){var r=e.copy(t);return r.slideInAnimation=n.slideInAnimation||r.slideInAnimation,r.slideOutAnimation=n.slideOutAnimation||r.slideOutAnimation,r.flyOutAnimation=n.flyOutAnimation||r.flyOutAnimation,r.shredAnimation=n.shredAnimation||r.shredAnimation,r}},{key:"slideToHand",value:function(t,n){var r=n.cardsToAdd,a=n.cards,i=n.duration,o=n.delay;if(!(null===r||void 0===r?void 0:r.length))return t;var c=t.slideInAnimation.concat(r.map((function(e,t){return{isToHand:!0,isExpand:!0,handIdx:a.length+t,noCardsInHand:a.length+r.length,delay:o*t,duration:i,card:e}})));return e.withNewAnimation(t,{slideInAnimation:c})}},{key:"removeSlideInAnimation",value:function(t,n){var r=t.slideInAnimation.filter((function(e){return e.card.key!==n}));return e.withNewAnimation(t,{slideInAnimation:r})}},{key:"slideFromHand",value:function(t,n){var r=n.keysToDelete,a=n.cards,i=n.delay,o=n.duration;if(!(null===r||void 0===r?void 0:r.length))return t;var c=a.map((function(e){return e.key})),s=t.slideOutAnimation.concat(r.map((function(e,t){var n=c.findIndex((function(t){return t===e}));return{isFromHand:!0,isShrink:!0,handIdx:n,noCardsInHand:a.length,delay:i,duration:o,card:a[n]}})));return e.withNewAnimation(t,{slideOutAnimation:s})}},{key:"removeSlideOutAnimation",value:function(t,n){var r=t.slideOutAnimation.filter((function(e){return e.card.key!==n}));return e.withNewAnimation(t,{slideOutAnimation:r})}},{key:"flyOut",value:function(t,n){var r=n.locs,a=n.cardsToFly,i=n.duration,o=n.delay,c=n.endLoc;if(!(null===a||void 0===a?void 0:a.length))return t;var s=t.flyOutAnimation.concat(a.map((function(e,t){return{loc:r[t],endLoc:c,isShrink:!0,duration:i,delay:o,card:e}})));return e.withNewAnimation(t,{flyOutAnimation:s})}},{key:"removeFlyOutAnimation",value:function(t,n){var r=t.flyOutAnimation.filter((function(e){return e.card.key!==n}));return e.withNewAnimation(t,{flyOutAnimation:r})}},{key:"Shred",value:function(t,n){var r=n.locs,a=n.cardsToShred,i=n.duration,o=n.delay;if(!(null===a||void 0===a?void 0:a.length))return t;var c=t.shredAnimation.concat(a.map((function(e,t){return{loc:r[t],duration:i,delay:o,card:e}})));return e.withNewAnimation(t,{shredAnimation:c})}},{key:"removeShredAnimation",value:function(t,n){var r=t.shredAnimation.filter((function(e){return e.card.key!==n}));return e.withNewAnimation(t,{shredAnimation:r})}},{key:"shuffleDiscardToDraw",value:function(t,n){var r=e.copy(t),a=n.noCards,i={duration:n.duration,delay:n.delay,noCards:a||10};return r.shuffleDiscardToDrawAnimation=i,r}},{key:"removeShuffleDiscardToDrawAnimation",value:function(t){var n=e.copy(t);return n.shuffleDiscardToDrawAnimation=null,n}}]),e}(),xn=Object(wn.b)({animation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Cn.queueAnimation(e,null===t||void 0===t?void 0:t.animation);case Ee:return Cn.startPlayingAnimation(e);case Me:return Cn.finishPlayingAnimation(e);case Te:return Cn.runNextAnimation(e);case _e:return Cn.dequeueAnimation(e);case Ie:return Cn.playAnimation(e,null===t||void 0===t?void 0:t.animation);case Ne:return Cn.removeSlideInAnimation(e,null===t||void 0===t?void 0:t.key);case Le:return Cn.removeSlideOutAnimation(e,null===t||void 0===t?void 0:t.key);case Re:return Cn.removeFlyOutAnimation(e,null===t||void 0===t?void 0:t.key);case He:return Cn.removeShredAnimation(e,null===t||void 0===t?void 0:t.key);case Fe:return Cn.removeShuffleDiscardToDrawAnimation(e);default:return e}}}),kn=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){return{cardTableLock:!1,actionQueue:[],drawPileCards:[],discardPileCards:[],cards:[],aimingCard:H,selectedCard:H,hoveredCard:-1}}},{key:"copy",value:function(e){return{cardTableLock:e.cardTableLock,actionQueue:e.actionQueue,drawPileCards:e.drawPileCards,discardPileCards:e.discardPileCards,cards:e.cards,aimingCard:e.aimingCard,selectedCard:e.selectedCard,hoveredCard:e.hoveredCard}}},{key:"withNewArray",value:function(t,n){var r=e.copy(t);return r.actionQueue=n.actionQueue||r.actionQueue,r.cards=n.cards||r.cards,r.drawPileCards=n.drawPileCards||r.drawPileCards,r.discardPileCards=n.discardPileCards||r.discardPileCards,r}},{key:"clearSecondaryStates",value:function(e){e.aimingCard=H,e.selectedCard=H,e.hoveredCard=-1}},{key:"addOneCard",value:function(t,n){n=n||Math.floor(1e4*Math.random())+"";var r=t.cards.concat(R.init(n,n+"-"+Math.floor(1e3*Math.random())));return e.withNewArray(t,{cards:r})}},{key:"addManyCards",value:function(t,n){n=n||new Array(5).fill(0).map((function(){return Math.floor(1e4*Math.random())+""}));var r=t.cards.concat(n.map((function(e){return R.init(e,e+"-"+Math.floor(1e3*Math.random()))})));return e.withNewArray(t,{cards:r})}},{key:"deleteAllCards",value:function(t){var n=e.withNewArray(t,{cards:[]});return e.clearSecondaryStates(n),n}},{key:"deleteOneCard",value:function(t,n){var r=e.withNewArray(t,{cards:t.cards.filter((function(e){return e.key!==n}))});return e.clearSecondaryStates(r),r}},{key:"selectCard",value:function(t,n){var r=e.copy(t);return e.clearSecondaryStates(r),r.selectedCard=n,r}},{key:"unselectCard",value:function(t){var n=e.copy(t);return e.clearSecondaryStates(n),n}},{key:"setAimingCard",value:function(t,n){var r=e.copy(t);return e.clearSecondaryStates(r),r.aimingCard=n,r}},{key:"setHoveredCard",value:function(t,n){var r=e.copy(t);return r.hoveredCard=n,r}},{key:"clearHoveredCard",value:function(t){var n=e.copy(t);return n.hoveredCard=-1,n}},{key:"addCardsToHand",value:function(t,n){var r=t.cards.concat(n.map((function(e){return e.copy()}))),a=e.withNewArray(t,{cards:r});return e.clearSecondaryStates(a),a}},{key:"deleteCardsFromHand",value:function(t,n){var r=e.withNewArray(t,{cards:t.cards.filter((function(e){return!n.includes(e.key)}))});return e.clearSecondaryStates(r),r}},{key:"addCardsToDrawPile",value:function(t,n){var r=J(n),a=t.drawPileCards.concat(r.map((function(e){return e.copy()}))),i=J(a);return e.withNewArray(t,{drawPileCards:i})}},{key:"deleteCardsFromDrawPile",value:function(t,n){return e.withNewArray(t,{drawPileCards:t.drawPileCards.filter((function(e){return!n.includes(e.key)}))})}},{key:"addCardsToDiscardPile",value:function(t,n){var r=t.discardPileCards.concat(n.map((function(e){return e.copy()})));return e.withNewArray(t,{discardPileCards:r})}},{key:"deleteCardsFromDiscardPile",value:function(t,n){return e.withNewArray(t,{discardPileCards:t.discardPileCards.filter((function(e){return!n.includes(e.key)}))})}},{key:"lockCardTable",value:function(t){var n=e.copy(t);return console.log("lock"),n.cardTableLock=!0,n}},{key:"unlockCardTable",value:function(t){var n=e.copy(t);return console.log("unlock"),n.cardTableLock=!1,n}},{key:"enqueueActionQueue",value:function(t,n){return e.withNewArray(t,{actionQueue:t.actionQueue.concat(n)})}},{key:"dequeueActionQueue",value:function(t){return e.withNewArray(t,{actionQueue:t.actionQueue.slice(1)})}}]),e}(),An=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){return{round:0,noShuffles:0,showDrawPile:!1,showDiscardPile:!1}}},{key:"copy",value:function(e){return{round:e.round,noShuffles:e.noShuffles,showDrawPile:e.showDrawPile,showDiscardPile:e.showDiscardPile}}},{key:"startRound",value:function(t){var n=e.copy(t);return n.round++,n}},{key:"incrementShuffle",value:function(t){var n=e.copy(t);return n.noShuffles++,n}},{key:"toggleDrawPile",value:function(t){var n=e.copy(t);return n.showDrawPile=!n.showDrawPile,n}},{key:"toggleDiscardPile",value:function(t){var n=e.copy(t);return n.showDiscardPile=!n.showDiscardPile,n}}]),e}(),Dn=Object(wn.b)({card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return kn.setAimingCard(e,t.key);case oe:return kn.addOneCard(e,null===t||void 0===t?void 0:t.key);case ce:return kn.addManyCards(e,null===t||void 0===t?void 0:t.keys);case se:return kn.deleteAllCards(e);case ue:return kn.deleteOneCard(e,null===t||void 0===t?void 0:t.key);case de:return kn.selectCard(e,t.key);case le:return kn.unselectCard(e);case fe:return kn.setAimingCard(e,t.key);case he:return kn.setHoveredCard(e,t.index);case pe:return kn.clearHoveredCard(e);case ve:return kn.addCardsToHand(e,t.cards);case ye:return kn.deleteCardsFromHand(e,null===t||void 0===t?void 0:t.keys);case me:return kn.addCardsToDrawPile(e,t.cards);case ge:return kn.deleteCardsFromDrawPile(e,null===t||void 0===t?void 0:t.keys);case be:return kn.addCardsToDiscardPile(e,t.cards);case Oe:return kn.deleteCardsFromDiscardPile(e,null===t||void 0===t?void 0:t.keys);case ke:return kn.lockCardTable(e);case Ae:return kn.unlockCardTable(e);case De:return kn.enqueueActionQueue(e,null===t||void 0===t?void 0:t.action);case Se:return kn.dequeueActionQueue(e);default:return e}},battle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return An.startRound(e);case we:return An.incrementShuffle(e);case Ce:return An.toggleDrawPile(e);case xe:return An.toggleDiscardPile(e);default:return e}}}),Sn=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){return{showCardSelectionPage:!1}}},{key:"copy",value:function(e){return{showCardSelectionPage:e.showCardSelectionPage}}},{key:"toggleCardSelectionPage",value:function(t){var n=e.copy(t);return n.showCardSelectionPage=!n.showCardSelectionPage,n}}]),e}(),Pn=Object(wn.b)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return Sn.toggleCardSelectionPage(e);default:return e}}}),En=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){var e=new Array(10).fill(0).map((function(e,t){var n=Math.random()>.5;return t<5?n?"quick_reference":"explain":n?"smile_and_nod":"calm"})),t=[],n=0,r=0,a=0,i=0;return e.forEach((function(e){switch(e){case"quick_reference":n++,t.push(R.init(e,e+"-"+n));break;case"explain":r++,t.push(R.init(e,e+"-"+r));break;case"smile_and_nod":a++,t.push(R.init(e,e+"-"+a));break;case"calm":i++,t.push(R.init(e,e+"-"+i))}})),{mot:60,met:15,res:5,san:200,hIdx:1,$$:2e3,cardsPerTurn:6,maxCardsInHand:10,deck:t}}},{key:"copy",value:function(e){return{mot:e.mot,met:e.met,res:e.res,san:e.san,hIdx:e.hIdx,$$:e.$$,cardsPerTurn:e.cardsPerTurn,maxCardsInHand:e.maxCardsInHand,deck:e.deck}}},{key:"addOneCardToDeck",value:function(t,n){for(var r=e.copy(t),a=1,i=r.deck.map((function(e){return e.key})),o=n+"-"+a++;i.includes(o);)o=n+"-"+a++;return r.deck.concat(R.init(n,o)),r}}]),e}(),Mn=Object(wn.b)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return En.addOneCardToDeck(e,t.id);default:return e}}}),Tn=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){return{showDeck:!1}}},{key:"copy",value:function(e){return{showDeck:e.showDeck}}},{key:"toggleShowDeck",value:function(t){var n=e.copy(t);return n.showDeck=!n.showDeck,n}}]),e}(),_n=Object(wn.b)({setting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn.init(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:return Tn.toggleShowDeck(e);default:return e}}}),In=n(46),Nn=n(81),Ln=wn.c,Rn=Object(wn.b)({animation:xn,battle:Dn,game:Pn,player:Mn,setting:_n}),Hn=Object(wn.d)(Rn,Ln(Object(wn.a)(In.a)));o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsxs)(K.a,{store:Hn,children:[Object(u.jsx)(Nn.a,{}),Object(u.jsx)(jn,{})]})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.5c27dc1e.chunk.js.map